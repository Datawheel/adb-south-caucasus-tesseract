<Schema name="adb-south-caucasus">

    <SharedDimension name="Geography">
        <Hierarchy name="Country">
            <Table name="dim_countries" />
                <Level key_column="oec_id" name="Exporter" name_column="comtrade_name" key_type="text">
                    <Property name="ISO 3" column="iso_3"/>
                </Level>
        </Hierarchy>
    </SharedDimension>

    <SharedDimension name="Product">
        <Hierarchy name="HS4">
            <Table name="dim_hs4"/>
                <Level name="Section" key_column="section_id" name_column="section" key_type="nontext">
                </Level>
                <Level name="HS2" key_column="hs2_id" name_column="hs2" key_type="nontext">
                </Level>
                <Level name="HS4" key_column="hs4_id" name_column="hs4" key_type="nontext">
                </Level>
        </Hierarchy>
    </SharedDimension>  

    <SharedDimension name="With Oil">
        <Hierarchy name="With Oil">
            <InlineTable alias="oil_table">
                <ColumnDef name="oil_code" key_type="nontext" key_column_type="UInt16" />
                <ColumnDef name="oil_bool" key_type="text" caption_set="en"/>
                <Row>
                    <Value column="oil_code">0</Value>
                    <Value column="oil_bool">No</Value>
                </Row>
                <Row>
                    <Value column="oil_code">1</Value>
                    <Value column="oil_bool">Yes</Value>
                </Row>
            </InlineTable>
            <Level name="With Oil" key_column="oil_code" name_column="oil_bool" key_type="nontext" />
        </Hierarchy>
    </SharedDimension>

    <SharedDimension name="With AGA">
        <Hierarchy name="With AGA">
            <InlineTable alias="aga_table">
                <ColumnDef name="aga_code" key_type="nontext" key_column_type="UInt16" />
                <ColumnDef name="aga_bool" key_type="text" caption_set="en"/>
                <Row>
                    <Value column="aga_code">0</Value>
                    <Value column="aga_bool">No</Value>
                </Row>
                <Row>
                    <Value column="aga_code">1</Value>
                    <Value column="aga_bool">Yes</Value>
                </Row>
            </InlineTable>
            <Level name="With AGA" key_column="aga_code" name_column="aga_bool" key_type="nontext" />
        </Hierarchy>
    </SharedDimension>

    <SharedDimension name="Dataset">
        <Hierarchy name="Dataset">
            <InlineTable alias="dataset_table">
                <ColumnDef name="dataset_code" key_type="nontext" key_column_type="UInt16" />
                <ColumnDef name="dataset_name" key_type="text" caption_set="en"/>
                <Row>
                    <Value column="dataset_code">0</Value>
                    <Value column="dataset_name">df_countries</Value>
                </Row>
                <Row>
                    <Value column="dataset_code">1</Value>
                    <Value column="dataset_name">df_countries_no_oil</Value>
                </Row>
                <Row>
                    <Value column="dataset_code">2</Value>
                    <Value column="dataset_name">df_countries_aga</Value>
                </Row>
                <Row>
                    <Value column="dataset_code">3</Value>
                    <Value column="dataset_name">df_countries_aga_no_oil</Value>
                </Row>                             
            </InlineTable>
            <Level name="Dataset" key_column="dataset_code" name_column="dataset_name" key_type="nontext" />
        </Hierarchy>
    </SharedDimension>

    <!--Trade Values-->
    <Cube name="Trade Values">
    
        <Table name="trade_values"/>
            
            <!--Dimension-->    
            <Dimension foreign_key="year" name="Year">
                <Hierarchy name="Year" primary_key="year">
                    <Level name="Year" key_column="year" />
                </Hierarchy>
            </Dimension>

            <Dimension foreign_key="importer_country_id" name="Importer Country">
                <Hierarchy name="Geography">
                    <Table name="dim_countries"/>
                        <Level name="Importer Country" key_column="oec_id" name_column="comtrade_name" key_type="text">
                        <Property name="Importer Country ISO 3" column="iso_3"/>
                        </Level>
                </Hierarchy>
            </Dimension>  

            <Dimension foreign_key="exporter_country_id" name="Exporter Country">
                <Hierarchy name="Geography">
                    <Table name="dim_countries"/>
                        <Level name="Exporter Country" key_column="oec_id" name_column="comtrade_name" key_type="text">
                        <Property name="Exporter Country ISO 3" column="iso_3"/>
                        </Level>
                </Hierarchy>
            </Dimension>  

            <Dimension foreign_key="hs6_id" name="Product">
                <Hierarchy name="Product">
                    <Table name="dim_product"/>
                        <Level name="HS2" key_column="hs2" name_column="hs2_name" key_type="nontext">
                        </Level>
                        <Level name="HS4" key_column="hs4" name_column="hs4_name" key_type="nontext">
                        </Level>
                        <Level name="HS6" key_column="hs6" name_column="hs6_name" key_type="nontext">
                        </Level>
                </Hierarchy>
            </Dimension>  

            <!--Measure-->
            <Measure name="Trade Values" column="trade_value" aggregator="sum"/>
    </Cube>

    <!--Export Values-->
    <Cube name="Export Values">
    
        <Table name="exports"/>
    
            <!--Dimension-->    
            <DimensionUsage foreign_key="oec_id" name="Exporter" source="Geography">
            </DimensionUsage>

            <DimensionUsage foreign_key="hs4_id" name="Product" source="Product">
            </DimensionUsage>

            <!-- <DimensionUsage foreign_key="dataset" name="Dataset" source="Dataset">
            </DimensionUsage> -->

            <DimensionUsage foreign_key="with_oil" name="With Oil" source="With Oil">
            </DimensionUsage>

            <DimensionUsage foreign_key="with_aga" name="With AGA" source="With AGA">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="Export Values" column="trade_value" aggregator="sum"/>
    </Cube>

    <!--GDP-->
    <Cube name="GDP">
    
        <Table name="gdp"/>
            
            <!--Dimension-->    
            <Dimension foreign_key="year" name="Year">
                <Hierarchy name="Year" primary_key="year">
                    <Level name="Year" key_column="year" />
                </Hierarchy>
            </Dimension>

            <DimensionUsage foreign_key="oec_id" name="Exporter" source="Geography">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="Gross Domestic Product (GDP)" column="gdp" aggregator="sum"/>
    </Cube>

    <!--Emissions-->
    <Cube name="Emissions">
        <Table name="emissions"/>

            <Dimension foreign_key='year' name='Year'>
                <Hierarchy name='Year' primary_key='year'>
                    <Level name='Year' key_column='year'/>
                </Hierarchy>
            </Dimension>

            <DimensionUsage foreign_key="oec_id" name="Exporter" source="Geography">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="Emissions KCO2" column="emissions_KCO2" aggregator="sum"/>

    </Cube>

    <!--Gini-->
    <Cube name="Gini">
    
        <Table name="gini"/>
            
            <!--Dimension-->    
            <Dimension foreign_key="year" name="Year">
                <Hierarchy name="Year" primary_key="year">
                    <Level name="Year" key_column="year" />
                </Hierarchy>
            </Dimension>

            <DimensionUsage foreign_key="country_id" name="Exporter" source="Geography">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="Gini Index" column="gini" aggregator="avg"/>
    </Cube>

    <!--RCA-->
    <Cube name="RCA">
        <Table name="rca"/>

            <DimensionUsage foreign_key="geo_id" name="Exporter" source="Geography">
            </DimensionUsage>

            <DimensionUsage foreign_key="hs4_id" name="Product" source="Product">
            </DimensionUsage>

            <!-- <DimensionUsage foreign_key="dataset" name="Dataset" source="Dataset">
            </DimensionUsage> -->

            <DimensionUsage foreign_key="with_oil" name="With Oil" source="With Oil">
            </DimensionUsage>

            <DimensionUsage foreign_key="with_aga" name="With AGA" source="With AGA">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="RCA" column="rca" aggregator="sum">
            </Measure>
    </Cube>

    <!--ECI-->
    <Cube name="ECI">
    
        <Table name="eci"/>
            
            <!--Dimension-->    
            <DimensionUsage foreign_key="geo_id" name="Exporter" source="Geography">
            </DimensionUsage>

            <!-- <DimensionUsage foreign_key="dataset" name="Dataset" source="Dataset">
            </DimensionUsage> -->

            <DimensionUsage foreign_key="with_oil" name="With Oil" source="With Oil">
            </DimensionUsage>

            <DimensionUsage foreign_key="with_aga" name="With AGA" source="With AGA">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="ECI" column="eci" aggregator="sum">
            </Measure>
    </Cube>

    <!--PCI-->
    <Cube name="PCI">
    
        <Table name="pci"/>
            
            <!--Dimension-->    
            <DimensionUsage foreign_key="hs4_id" name="Product" source="Product">
            </DimensionUsage>

            <!-- <DimensionUsage foreign_key="dataset" name="Dataset" source="Dataset">
            </DimensionUsage> -->

            <DimensionUsage foreign_key="with_oil" name="With Oil" source="With Oil">
            </DimensionUsage>

            <DimensionUsage foreign_key="with_aga" name="With AGA" source="With AGA">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="PCI" column="pci" aggregator="sum">
            </Measure>
    </Cube>

    <!--Relatedness-->
    <Cube name="Relatedness">
    
        <Table name="relatedness"/>
            
            <!--Dimension-->    
            <DimensionUsage foreign_key="geo_id" name="Exporter" source="Geography">
            </DimensionUsage>

            <DimensionUsage foreign_key="hs4_id" name="Product" source="Product">
            </DimensionUsage>

            <!-- <DimensionUsage foreign_key="dataset" name="Dataset" source="Dataset">
            </DimensionUsage> -->

            <DimensionUsage foreign_key="with_oil" name="With Oil" source="With Oil">
            </DimensionUsage>

            <DimensionUsage foreign_key="with_aga" name="With AGA" source="With AGA">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="Relatedness" column="relatedness" aggregator="sum">
            </Measure>
    </Cube>

    <!--Oportunity Gain-->
    <Cube name="Oportunity Gain">
    
        <Table name="op_gain"/>
            
            <!--Dimension-->    
            <DimensionUsage foreign_key="geo_id" name="Exporter" source="Geography">
            </DimensionUsage>

            <DimensionUsage foreign_key="hs4_id" name="Product" source="Product">
            </DimensionUsage>

            <!-- <DimensionUsage foreign_key="dataset" name="Dataset" source="Dataset">
            </DimensionUsage> -->

            <DimensionUsage foreign_key="with_oil" name="With Oil" source="With Oil">
            </DimensionUsage>

            <DimensionUsage foreign_key="with_aga" name="With AGA" source="With AGA">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="Oportunity Gain" column="op_gain" aggregator="sum">
            </Measure>

    </Cube>

    <!--Similarity-->
    <Cube name="Similarity">
        <Table name="similarity"/>
            
            <!--Dimension-->    

            <Dimension foreign_key="geo_id_1" name="Geography A">
                <Hierarchy name="Geography A">
                    <Table name="dim_countries" />
                        <Level key_column="oec_id" name="Geography A" name_column="comtrade_name" key_type="text">
                        <Property name="ISO 3 A" column="iso_3"/>
                        </Level>
                </Hierarchy>
            </Dimension>

            <Dimension foreign_key="geo_id_2" name="Geography B">
                <Hierarchy name="Geography B">
                    <Table name="dim_countries" />
                        <Level key_column="oec_id" name="Geography B" name_column="comtrade_name" key_type="text">
                        <Property name="ISO 3 B" column="iso_3"/>
                        </Level>
                </Hierarchy>
            </Dimension>

            <DimensionUsage foreign_key="with_oil" name="With Oil" source="With Oil">
            </DimensionUsage>

            <DimensionUsage foreign_key="with_aga" name="With AGA" source="With AGA">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="Similarity" column="similarity" aggregator="sum">
            </Measure>
    </Cube>


    <!--Similarity-->
    <Cube name="Similarity">
        <Table name="similarity"/>
            
            <!--Dimension-->    

            <Dimension foreign_key="geo_id_1" name="Geography A">
                <Hierarchy name="Geography A">
                    <Table name="dim_countries" />
                        <Level key_column="oec_id" name="Geography A" name_column="comtrade_name" key_type="text">
                        </Level>
                </Hierarchy>
            </Dimension>

            <Dimension foreign_key="geo_id_2" name="Geography B">
                <Hierarchy name="Geography B">
                    <Table name="dim_countries" />
                        <Level key_column="oec_id" name="Geography B" name_column="comtrade_name" key_type="text">
                        </Level>
                </Hierarchy>
            </Dimension>


            <!-- <DimensionUsage foreign_key="dataset" name="Dataset" source="Dataset">
            </DimensionUsage> -->

            <DimensionUsage foreign_key="with_oil" name="With Oil" source="With Oil">
            </DimensionUsage>

            <DimensionUsage foreign_key="with_aga" name="With AGA" source="With AGA">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="Similarity" column="similarity" aggregator="sum">
            </Measure>
    </Cube>

    <!--Proximity-->
    <Cube name="Proximity">
    
        <Table name="proximity"/>
            
            <!--Dimension-->    

            <Dimension foreign_key="hs4_id_1" name="Product A">
                <Hierarchy name="HS4 A">
                    <Table name="dim_hs4"/>
                        <Level name="HS2 A" key_column="hs2_id" name_column="hs2" key_type="nontext">
                        </Level>
                        <Level name="HS4 A" key_column="hs4_id" name_column="hs4" key_type="nontext">
                        </Level>
                </Hierarchy>
            </Dimension>  

            <Dimension foreign_key="hs4_id_2" name="Product B">
                <Hierarchy name="HS4 B">
                    <Table name="dim_hs4"/>
                        <Level name="HS2 B" key_column="hs2_id" name_column="hs2" key_type="nontext">
                        </Level>
                        <Level name="HS4 B" key_column="hs4_id" name_column="hs4" key_type="nontext">
                        </Level>
                </Hierarchy>
            </Dimension>  

            <DimensionUsage foreign_key="with_oil" name="With Oil" source="With Oil">
            </DimensionUsage>

            <DimensionUsage foreign_key="with_aga" name="With AGA" source="With AGA">
            </DimensionUsage>

            <!--Measure-->
            <Measure name="Proximity" column="proximity" aggregator="sum">
            </Measure>
    </Cube>



</Schema>